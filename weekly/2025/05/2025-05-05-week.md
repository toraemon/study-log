# 🗓️ 2025 年 05 月 05 日（月）学習ログ（Selinger 論文：セクション 4）

## ✅ 学習概要

- Selinger らによる論文「Access Path Selection in a Relational Database Management System」を読んだ。
- 本日はセクション 4 までを精読し、単一テーブルのアクセスパスの経路選択について学んだ。

---

## 🕰️ 学習時間

150 分

---

## 📚 使用教材

- Selinger, P. Griffiths et al., Access Path Selection in a Relational Database Management System, 1979（提供 PDF）

---

## 📖 学習範囲・内容

- COST = PAGE FETCHES + W + RSI CALLS
- W: I/O と CPU 間の調整可能な重み付け係数
- RSI CALLS: RSS から返される予測タプル数（CPU 時間の近似値）
- クエリを処理するための最小コストの経路選択 ≒ 必要な総リソースを最小化するもの
- 述語が SARGABLE かつ、列が INDEX の初期部分文字列 ⇒ INDEX アクセスパスにマッチする
- 統計情報はユーザによって周期的に更新される（自動的に更新はされない）
- ORDER BY や GROUP BY がない場合は、"interesting" でない順序で最も安いアクセスパスが選択される
- ORDER BY や GROUP BY がある場合は、MIN("interesting" な順序, "unordered" な順序)でアクセスパスが選択される

### 📊 統計情報

| 語句     | 説明                                   |
| :------- | :------------------------------------- |
| NCARD(T) | カーディナリティ                       |
| TCARD(T) | タプルを保持するセグメント間のページ数 |
| P(T)     | セグメント間のデータページの割合       |
| ICARD(T) | インデックスの異なるキーの数           |
| NINDX(T) | インデックスのページ数                 |
| QCARD    | Query Cardinality                      |

※ P(T) = TCARD(T) / (no. of non-empty pages in the segment)
※ QCARD = クエリブロックの FROM リストに含まれるすべてのリレーションのカーディナリティ × クエリブロックの boolean 因子のすべての選択性因子

### 📐 COST FORMULAS 一覧

| アクセスパス種別                   | コスト式                                          | 説明                                                             |
| :--------------------------------- | :------------------------------------------------ | :--------------------------------------------------------------- |
| セグメントスキャン（全件スキャン） | COST = NCARD                                      | 全ページを読み込むコスト。SARG がなければ全件対象。              |
| セグメントスキャン + SARG          | COST = NCARD × F                                  | セレクティビティ F により必要なページ数を減らす。                |
| インデックススキャン               | COST = #index page fetches + #data page fetches   | インデックス走査 + 実データ読み出しの合計。B-tree の高さも考慮。 |
| インデックススキャン + SARG        | COST = ICOST + DPCOST × F                         | ICOST: インデックスページ数, DPCOST: データページ数。            |
| タプル単位の CPU コスト            | + W × (TCARD × F)                                 | RSI CALLS の部分に対応。タプルごとの処理時間の見積もり。         |
| 複合述語（AND/OR）                 | F = F1 \* F2（AND）, F = F1 + F2 - F1 \* F2（OR） | 論理演算に基づく合成。                                           |
| NOT 述語                           | F = 1 - F1                                        | 補集合としての計算。                                             |

### 💡 補足キーワード

| 用語     | 意味                                                                                     |
| :------- | :--------------------------------------------------------------------------------------- |
| F        | 選択性（Selectivity Factor）。条件を満たす割合。                                         |
| RSS      | Relational Storage System：物理的記憶構造（テーブル・インデックス等）を操作する層。      |
| RSI      | Relational Storage Interface：RSS への呼び出しインターフェース。上位のエンジンから使用。 |
| sargable | Search ARGument applicable。スキャン中に事前適用可能な述語。                             |
| ICARD    | インデックスのユニークキー数。1 / ICARD が等価述語の選択性になる。                       |
| W        | I/O と CPU のバランスを調整する重み係数。経験則により調整可能。                          |

（以下、SELECTIVITY FACTORS と調べた単語・用語〜は続きとしてそのまま残す）

### 計算式 (SELECTIVITY FACTORS)

※ F = 選択性因子（条件を満たすタプルの割合）

#### 1. column = value

インデックス列の場合

```math
F = 1 / ICARD(column index)
```

それ以外

```math
F = 1 / 10
```

→ これは統計がない場合の約束値（arbitrary value）として読み取れる

#### 2. column1 = column2

両方がインデックス列：

```math
F = 1 / MAX(ICARD(column1 index), ICARD(column2 index))
```

片方だけインデックス列：

```math
F = 1 / ICARD(column-i index)
```

それ以外：

```math
F = 1 / 10
```

#### 3. column > value

算術型の場合：

```math
F = (high key value - value) / (high key value - low key value)
```

それ以外：

```math
F = 1 / 3
```

#### 4. column BETWEEN value1 AND value2

算術型＆両値が明示の場合：

```math
F = (value2 - value1) / (high key value - low key value)
```

それ以外：

```math
F = 1 / 4
```

#### 5. column IN (list of values)

```math
F = min(リスト個数 × (F の件), 1/2)
```

#### 6. column A IN subquery

```math
F = (サブクエリ結果の予測カーディナリティ) / (すべてのFROMリストのカーディナリティの積)
```

#### 7. 論理演算による合成

| 演算 | 計算式                  |
| :--- | :---------------------- |
| AND  | `F = F1 * F2`           |
| OR   | `F = F1 + F2 - F1 * F2` |
| NOT  | `F = 1 - F1`            |

---

## 📗 調べた単語・用語

| 単語          | 意味                                                                              |
| :------------ | :-------------------------------------------------------------------------------- |
| conjunctive   | 接続の                                                                            |
| notable       | 注目すべき                                                                        |
| retrieve      | 取得する                                                                          |
| periodically  | 周期的に                                                                          |
| correspond    | 対応する                                                                          |
| imply         | 暗示する                                                                          |
| arbitrary     | 任意                                                                              |
| interpolation | 補完                                                                              |
| significance  | 意義                                                                              |
| derive        | 導く                                                                              |
| RSS           | Relational Storage System: 物理的な記憶構造を管理する層                           |
| RSI           | Relational Storage Interface: オプティマイザが RSS に呼び出すためのインタフェース |
| sargable      | 条件をスキャン時に適用できるもの（例：col = value）                               |

---

## 📊 疑問点と確認結果

| 項目                | 疑問                                                               | メモ・確認ポイント                                                                                                |
| :------------------ | :----------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------- |
| SELECTIVITY FACTORS | high key value と low key value のところがイメージできない         | 実際のデータ分布や範囲値がないと描きにくいが、それに基づいた統計評価を行う主旋の計算式として表現される            |
| SELECTIVITY FACTORS | BETWEEN などに出てくる算術型って、文字列の時は該当しないってこと？ | その通りにゃ！算術型は数値分布を前提としているので、文字列の場合はデフォルト値 (1/3 や 1/4)での複合が使われる     |
| SELECTIVITY FACTORS | Subquery のところがイメージできない                                | どれだけの行がサブクエリ結果に含まれるかを予測し、合理的な選択性を予測する。例：サブクエリ結果 / リレーション総数 |

---

## 💬 感想・気づき

- アクセスパスの経路決定に関するところは内部実装依存で普段あまり意識しないので、どういう計算をしているのかわかってよかった、JOIN などはよりパフォーマンスに影響出てくるところなのでしっかり学習したい
- やっぱり英語読む力が欠けているから、かなり時間がかかってしまうので別途学習が必要
- コスト計算について学び終えた際はこれをどう実業務でいかしていくかを検討したい

---

# 🗓️ 2025年05月07日（水）学習ログ（WebAPI:TheGoodParts：3章）

## ✅ 学習概要

- 要点
  - [Good] HTTPの仕様を最大限利用し、独自仕様の利用を最低限にとどめる
  - [Good] 適切なステータスコードを用いる
  - [Good] 適切な、なるべく一般的なメディアタイプを返す
  - [Good] クライアントが適切なキャッシュを行えるように情報を返す

---

## ⏱ 学習時間
30分

---

## 📚 使用教材

- 『Web API: The Good Parts』（第 4 章）

---

## 📖 学習範囲・内容

- レスポンスステータスコードは200番代（成功）、400番代（クライアントサイドに起因するエラー）、500番代（サーバサイドに起因するエラー）
- キャッシュ戦略はExpirationModel（期限切れモデル）、ValidationModel（検証モデル）、HeuristicExpiration（発見的期限切れ）、キャッシュさせないがある

---

## 📊 疑問点と確認結果

| 疑問 | ゴエモン（ChatGPT）回答 |
| :--- | :--- |
| ①押さえておくべきステータスコードは？ | 基本的には今使っているものでOK |
| ②押さえておくべきキャッシュディレクティブは？ | 下記参照 |
| ③押さえておくべきメディアタイプは？ | 下記参照 |

### ①押さえておくべきステータスコード
| ステータスコード | 説明 |
| :--- | :--- |
| 200 | OK：成功。通常のGETやPUTの成功時。 |
| 201 | Created：POSTで新規リソース作成時に使うべき。|
| 204 | No Content：成功したけど返すべきデータがない場合（DELETEや一部のPUT）。|
| 400 | Bad Request：リクエスト内容がおかしい（バリデーションエラーなど）。|
| 401 | Unauthorized：認証が必要なのに行われていない。|
| 403 | Forbidden：認証済みだが、権限がない。|
| 404 | Not Found：リソースが存在しない。|
| 409 | Conflict：リソースの状態によって衝突が起きた（例：重複登録など）。|
| 500 | Internal Server Error：サーバー内の予期しないエラー。|
| 503 | Service Unavailable：サービス一時停止中、メンテナンス中など。|

**✅ 検討したい追加候補**

| ステータスコード | 説明 |
| :--- | :--- |
| 422 | Unprocessable Entity：バリデーションエラーなどを明示したいときに400より具体的 |
| 429 | Too Many Requests：レートリミット（認証試行やAPIアクセス制限）を導入している場合に。 |

### ②押さえておくべきキャッシュディレクティブ
| ディレクティブ | 説明 |
| :--- | :--- |
| no-store | **一切キャッシュさせない**（認証情報など機密データ向け）。 |
| no-cache | **キャッシュするけど毎回再検証が必要。** |
| max-age=N | **キャッシュの有効期間（秒）**。例：max-age=3600 |
| must-revalidate | 有効期限が切れたら再検証必須。 |
| private | クライアント単位でのみキャッシュ。共有キャッシュ（CDNなど）不可。 |
| public | どこでもキャッシュ可能。 |

📌トークンやユーザー情報APIは「no-store + 認証あり」パターンが基本

### ③メディアタイプ：JSON以外に覚えておきたいもの
| メディアタイプ | 用途例 |
| :--- | :--- |
| application/xml | レガシーAPI対応や外部サービスとの連携（減少傾向） |
| application/x-www-form-urlencoded | フォームデータ送信（古典的POST） |
| multipart/form-data | ファイルアップロード（画像・音声など） |
| application/problem+json | RFC7807 形式のエラー詳細表現 |
| text/csv | CSVダウンロードAPIなど |
| application/pdf や image/webp など | バイナリファイル提供 |

---

## 🐾 Web API 第4章 理解チェック問題（4問）

### 問題1：ステータスコードの適切な使い分け
以下のAPIのレスポンスとして最も適切なHTTPステータスコードを選びなさい。

「ユーザー情報を更新するPUT API」で、更新対象のユーザーが存在しなかった場合」

A. 200 OK  
B. 204 No Content  
C. 404 Not Found  
D. 409 Conflict

### 問題2：キャッシュ制御に関する理解
以下のうち、一切キャッシュをさせたくない場合に最も適切な Cache-Control のディレクティブはどれか？

A. no-cache  
B. no-store  
C. private  
D. must-revalidate

### 問題3：メディアタイプの選択
ファイルアップロードを伴うフォームデータ送信に最適なメディアタイプはどれか？

A. application/json  
B. application/x-www-form-urlencoded  
C. multipart/form-data  
D. application/octet-stream  

### 問題4：ステータスコードの区別
次のうち、認証はされているが、その操作を行う権限がないときに返すべきステータスコードはどれか？

A. 401 Unauthorized  
B. 403 Forbidden  
C. 404 Not Found  
D. 422 Unprocessable Entity

---

## 🐾 Web API 第4章：理解チェック問題と解説

### ✅ 問題1：ステータスコードの使い分け
Q. ユーザー情報を更新するPUT APIで、更新対象のユーザーが存在しなかった場合に返すべきステータスコードは？  
A. C. 404 Not Found

### 📝 解説：
リソースが存在しないことを明示する場合は 404。
排他制御（バージョン不一致や二重更新）などの場合は 409 Conflict を使うが、今回のケースは「対象が存在しない」ため 404 が適切。

### ✅ 問題2：キャッシュ制御
Q. 一切キャッシュをさせたくない場合に適切な Cache-Control ディレクティブは？  
A. B. no-store

### 📝 解説：

no-store：キャッシュに保存すらしない（機密情報に使用）。

no-cache：キャッシュに保存してよいが、使用前にサーバーへ再検証が必要。

### ✅ 問題3：メディアタイプ
Q. ファイルアップロードを伴うフォームデータ送信で使うべきメディアタイプは？  
A. C. multipart/form-data

### 📝 解説：
ファイルとテキストデータを同時に送信する場合の標準的な形式。HTMLフォームで enctype="multipart/form-data" を指定するケースでも使われる。

### ✅ 問題4：ステータスコードの違い
Q. 認証はされているが、操作の権限がない場合に返すべきステータスコードは？  
A. B. 403 Forbidden

### 📝 解説：

401 Unauthorized：認証がされていない。

403 Forbidden：認証済みだが許可されていない操作（例：一般ユーザーが管理者APIを叩いたなど）。

---

## 💬 感想・気づき

- レスポンスステータスは基本的には調べながらAPIを設計していたので、ある程度は押さえられていたけどPUT（PATCH）を200にするか204にするかの基準がわかってよかった
- やっぱり2014年出版ということもあってCORSやWebPなどがまだ広がる前なのかなと感じる記載がところどころ見られる、最新版になると結構変わったりするのかなぁ？
- キャッシュのディレクティブについては結構いい加減な理解だったので改めて学習する機会となったけど、まだ表面上の理解しかできていないのでどこかのタイミングで実際に挙動を確認しながら理解を深めたい

---

## 📕 参考文献（ある場合だけ）

- 教科書関連
- 関連文献

---

# 🗓️ 2025年05月09日（金）学習ログ（統計学）

## ✅ 学習概要

- 『やさしくわかる統計学のための数学』を読んだ
- 本日は第5章から第8章までを読み、カイ二乗分布やt分布を利用した区間推定、仮説検定、単回帰を学んだ

---

## 🕰️ 学習時間
200分

---

## 📚 使用教材

- [『中学レベルかはじめる！やさしくわかる統計学のための数学』](https://www.natsume.co.jp/np/isbn/9784816366147/)

---

## 📖 学習範囲・内容

- 母平均推定のまとめ

①母分散が既知の場合
```math
\bar{X} - 1.96 \frac{σ}{\sqrt n} ≤ μ ≤ \bar{X} + 1.96 \frac{σ}{\sqrt n}
```
②大標本(n≧30)の場合
```math
\bar{X} - 1.96 \frac{S}{\sqrt n} ≤ μ ≤ \bar{X} + 1.96 \frac{S}{\sqrt n}
```
③母分散が未知の場合(tは自由度n-1)
```math
\bar{X} - t \sqrt{\frac{U^2}{n}} ≤ μ ≤ \bar{X} + t \sqrt{\frac{U^2}{n}} \space (tは自由度n-1)
```
- 第1種の誤り：本当は帰無仮説が正しいのに、帰無仮説を棄却し、正しくない対立仮説を採択してしまうこと（有意水準の確立と等しい）
- 第2種の誤り：帰無仮説を棄却できないために、本当は正しい対立仮説を採択できないこと（第1種の誤りとトレードオフの関係にある）
- 仮説検定の手順：
  1. 帰無仮説H0と対立仮説H1を立てる（対立仮説の立て方で両側検定か片側検定かを決定する）
  2. 検定統計量を求める
  3. 棄却域を設定する
  4. 帰無仮説が正しいかどうかを検証する（帰無仮説が正しくない⇒対立仮説を採択する）
- このテキストで扱った仮説検定一覧
1. 母平均に関する検定（母分散が既知）：標準正規分布
```math
Z = \frac{\bar{X} - μ}{\frac{σ}{\sqrt n}}
```
2. 母平均に関する検定（母分散が未知）：自由度n-1のt分布
```math
T = \frac{\bar{X} - μ}{\sqrt{\frac{U^2}{n}}}
```
3. 母分散に関する検定（母平均が既知）：自由度nのカイ二乗分布
```math
V = \frac{\sum(X_i - μ)^2}{σ^2} 
```
4. 母分散に関する検定（母平均が未知）：自由度n-1のカイ二乗分布
```math
W = \frac{\sum(X_i - x̄)^2}{σ^2}
```
5. 母比率に関する検定：標準正規分布
```math
Z = \frac{\frac{X}{n} - p}{\sqrt {\frac{p(1-p)}{n}}}
```
6. 母平均の差異に関する検定（母分散が既知）：標準正規分布
```math
Z = \frac{\bar{X} - \bar{Y} - (μ_x - μ_y)}{\sqrt{\frac{σ_x^2}{m} + {\frac{σ_y^2}{n}}}}
```
7. 母平均の差異に関する検定（母分散が等しいと仮定）：自由度m+n-2のt分布
```math
T = \frac{\bar{X} - \bar{Y} - (μ_x - μ_y)}{\sqrt{(\frac{1}{m} + {\frac{1}{n}})U_{xy}}} \\
U_{xy} = \frac{(m-1) U_x^2 + (n-1) U_y^2}{m+n-2}
```
8. 母平均の差異に関する検定（母分散が未知）：自由度νのt分布
```math
T = \frac{\bar{X} - \bar{Y} - (μ_x - μ_y)}{\sqrt{\frac{U_x^2}{m} + {\frac{U_y^2}{n}}}} \\
ν = \frac{(\frac{U_x^2}{m} + \frac{U_y^2}{n})^2}{\frac{\frac{U_x^2}{m}}{m-1} + \frac{\frac{U_y^2}{n}}{n-1}}
```
9. 等分散の検定：自由度(m-1, n-1)のF分布
```math
F = \frac{U_x^2}{U_y^2}
```
10. 適合度検定：自由度K-1のカイ二乗分布
```math
χ^2 = \sum(\frac{x_k - np_k}{np_k})
```
11. 独立性の検定：自由度（rows-1)(columns-1)のカイ二乗分布
```math
χ^2 = \sum \frac{(観測値_i - 理論値_i)^2}{理論値_i}
```

---

## 📊 疑問点と確認結果

疑問 | メモ・確認ポイント |
| :--- | :--- |
| ①適合度の検定と独立性の検定で同じカイ二乗分布を使う理由 | **ズレ（二乗和）という形の統計量になる**ためカイ二乗分布が適用できる |
| ②準1級の準備として、自由度の理解はどこまですべき？導出もできるようにすべき？ | 導出まで含めてできるようになる必要あり |
| ③仮説検定一覧のところでさらに深堀りしたほうがよいものはあるか？ | t検定とF検定を優先的に掘り下げよう |

---

### 💡 適合度の検定と独立性の検定で同じカイ二乗分布を使う理由（疑問①のまとめ）

- 両者に共通して使われる統計量は以下の形をしている：

  $\chi^2 = \sum \frac{(\text{観測値} - \text{期待値})^2}{\text{期待値}}$

- この統計量は、**観測値と期待値のズレ（偏差）を標準化して2乗し、それを合計**したものであり、  
  これは **「標準正規分布の2乗和」**として定義される **カイ二乗分布**の形と一致しているにゃ。


#### 🧠 重要ポイント

- **カイ二乗分布とは？**  
  複数の**標準正規分布 $Z_i$** を2乗して足し合わせたものに従う分布：

  $\chi^2 = Z_1^2 + Z_2^2 + \cdots + Z_k^2$

- 適合度検定も独立性検定も、「観測と期待のズレを2乗して合計する」形を取るため、  
  このカイ二乗分布に従う統計量になるにゃ。

#### 🐾 両者の違いと共通点

| 検定         | 検定の目的                 | 期待値の出し方                     | 自由度            |
|--------------|----------------------------|------------------------------------|-------------------|
| 適合度検定   | ある分布に当てはまるか     | 理論値 $np_k$                       | 区間の数 − 1      |
| 独立性検定   | 変数間に関係があるか       | クロス表から独立と仮定して計算     | $(\text{行}−1) \times (\text{列}−1)$ |

- 目的は異なるが、**誤差（ズレ）の評価方法が同じ**なので、統計量の形も同じ ⇒ **カイ二乗分布を使うことができる**にゃ！

#### 🔍 補足：ばらつきのイメージとの違いについて

- カイ二乗分布は母分散の推定にも使われるため「ばらつき」を扱う印象が強いにゃが、  
- 適合度検定・独立性検定では「ばらつき」よりも **ズレ（二乗和）という形の統計量になるためカイ二乗分布が適用できる**というロジックが本質に近いにゃ。

---

### 💡 準1級の準備として、自由度の理解はどこまですべき？導出もできるようにすべき？（疑問②のまとめ）

#### 🎯 結論

統計検定準1級では、**自由度の「定義」だけでなく、導出や意味づけ、使われ方の理解が重要**になるにゃ！  
「なぜこの自由度になるのか？」と問われるケースもあるため、**丸暗記だけでは不十分**にゃ。


#### 🧠 準1級で求められる自由度の理解レベル

| レベル | 内容 | 準1級での扱い |
|--------|------|----------------|
| ★       | 公式を覚えて使える（例：n−1） | 2級レベル |
| ★★     | 「なぜ −1 するのか？」を説明できる | **必須** |
| ★★★   | 複数条件の制約による自由度算出（例：クロス表） | **必須** |
| ★★★★ | ウエルチの近似自由度などの導出・意味理解 | 出題される可能性あり |


#### 🐾 例：分散の自由度が n−1 になる理由

- 標本平均 $\bar{x}$ を計算することで、n 個のデータのうち 1つが他の n-1 個で決まってしまうにゃ。
- つまり、**独立に変えられるデータの個数**が n-1 となり、それが **自由度（degrees of freedom）**に対応するにゃ。



#### 🔍 ウエルチの自由度の式（近似自由度）

$\nu = \frac{ \left( \frac{S_x^2}{n} + \frac{S_y^2}{m} \right)^2 }{ \frac{ \left( \frac{S_x^2}{n} \right)^2 }{n-1} + \frac{ \left( \frac{S_y^2}{m} \right)^2 }{m-1} }$

- 2標本の分散が異なる場合に使用する検定で使われる式にゃ。
- **この式は準1級で暗記しているだけでは対応が難しく、「なぜこの形か」を理解することが今後の課題にゃ。**

#### ✅ 今後の目標として

- 自由度の定義や導出のイメージを少しずつ整理し、説明できるようにするにゃ。
- 特に「自由度 = ○○」という公式の背景にある**制約の数・標本の性質**を意識して学んでいくと力がつくにゃ！

---
### 💡 準1級の準備として、自由度の理解はどこまですべき？導出もできるようにすべき？（疑問②のまとめ）

#### 🎯 結論

統計検定準1級に向けては、**特にt検定とF検定を中心に、仮定・使い分け・自由度の意味まで深く理解することが重要**にゃ！  
仮説の立て方、検定統計量の式の意味、自由度の理由などが問われやすく、丸暗記では通用しないにゃ。

#### 🐾 優先的に深掘りすべき項目

| 検定項目 | 深掘り推奨理由 |
|----------|----------------|
| ② 母平均のt検定（母分散未知） | **Zとの違い、t分布の意味、自由度n−1の説明**などが頻出 |
| ⑦ 2標本t検定（等分散仮定あり） | **合併分散の考え方、自由度m+n−2の意味、仮定の重要性**が問われやすい |
| ⑧ 2標本t検定（等分散仮定なし） | **ウエルチの自由度式、なぜZではなくtか**といった理解が求められる |
| ⑨ 等分散のF検定 | **自由度の計算、tとの関係、検定の目的（前提条件チェック）**が重要 |

#### 🧠 各検定の補足ポイント

- **② 母平均のt検定（母分散未知）**  
  $T = \frac{\bar{x} - \mu}{\sqrt{\frac{U^2}{n}}}$  
  → Zとの違い・自由度n-1の理由を説明できるようににゃ！

- **⑦ 等分散仮定ありの2標本t検定**  
  → 合併分散の意味、なぜ自由度がm+n-2になるかを整理にゃ。

- **⑧ ウエルチのt検定（等分散なし）**  
  → 自由度の式は暗記に頼りがちだが、**「なぜ使うのか」**を言えるようにするにゃ。

- **⑨ F検定（等分散の検定）**  
  $F = \frac{U_x^2}{U_y^2}$  
  → F分布の非対称性・自由度の構成・片側検定になる理由を意識にゃ。

#### 🐱 その他の検定項目の扱い

| 検定項目 | 優先度 | 補足 |
|----------|--------|------|
| ① Z検定（母分散既知） | △ | t検定との違いを押さえればOK |
| ⑤ 母比率のZ検定 | △ | 標本比率の性質が理解できれば十分 |
| ⑥ 母平均の差（母分散既知） | △ | 実務での使用頻度は低く、t検定でカバー可能 |
| ⑩・⑪ カイ二乗検定（適合度・独立性） | ○ | 自由度の求め方と検定の意味を正しく説明できるようにするにゃ |

#### ✅ まとめ

> ✔️ t検定（特に2標本）とF検定は、仮定の違いや自由度の意味まで深く理解しておくことが重要にゃ。  
> **「なぜその検定を使うのか」「どういう前提で成り立っているのか」**を説明できることが準1級への第一歩にゃ！

---

## 💬 感想・気づき

- 計算自体は問題なくできるが、自由度の導出や数式の導出の証明できていない
- 7章の仮説検定の箇所は例題を復習するまで細かい部分を忘れていて解答を再現できなかった
- 2級相当の範囲で学習していた当時は解けるようになっていたが、改めて復習をしないといけないと感じた
- 改めて簡易的な証明含めて自分でも証明ができるようにしていく必要あり
- この学習記録のおかげでMarkdownの数式記法を覚えれた！

## 💪 今後やりたいこと
- 統計ソフトやプログラムを使った学習
- 実データを使って仮説検定をしてみる

---

## 📕 参考文献（ある場合だけ）

- 教科書関連
- 関連文献

---

## 📝 理解度チェック

### 【問1】
適合度検定と独立性検定で共通して使用されるカイ二乗統計量の式はどのような形か？また、それがカイ二乗分布に従う理由を簡潔に述べなさい。

### 【問2】
2標本t検定において、等分散を仮定する場合と仮定しない場合で、使う検定手法と自由度はどのように異なるか？

### 【問3】
F検定で自由度(m−1, n−1)とする理由を説明しなさい。また、F検定が片側検定になる理由も述べなさい。

### 【問4】
自由度が 𝑛−1 になるのはどのような状況か？理由とあわせて説明しなさい。

--- 

## 📝 理解度チェック問題と回答

### 【問1】  
適合度検定と独立性検定で共通して使用されるカイ二乗統計量の式はどのような形か？また、それがカイ二乗分布に従う理由を簡潔に述べなさい。

- 🐱 自分の回答：
  > カイ二乗統計量の式の形は二乗和となる（理論値と観測値の二乗和を理論値で割った値を合計したもの）  
  > 複数の標準正規分布から取得した値を二乗して合計したものがカイ二乗分布となるため、適合度検定と独立性の検定の統計量もこの条件を満たすためカイ二乗分布に従う

- 💡 模範解答：
  > カイ二乗統計量は  
  > $\chi^2 = \sum \frac{(観測値 - 期待値)^2}{期待値}$  
  > の形をしており、「ズレの標準化された2乗和」である。これは複数の標準正規分布の2乗和として定義されるカイ二乗分布の性質と一致するため、この統計量はカイ二乗分布に従う。

- ✅ 評価：**Sランク！** 概要・背景ともに理解できており、非常に良いにゃ！

---

### 【問2】  
2標本t検定において、等分散を仮定する場合と仮定しない場合で、使う検定手法と自由度はどのように異なるか？

- 🐱 自分の回答：
  > 等分散を仮定する場合：2標本の不偏分散の加重平均を取ったものを分散として代用してT検定を行う、この際の自由度は二標本のデータ件数をそれぞれ-1した合計値となる  
  > 等分散を仮定しない場合：2標本の不偏分散を使用してウェルチのT検定を行う、自由度はνとなり計算式は省略するが不偏分散とデータ数を使った計算を行って算出する

- 💡 模範解答：
  > 等分散を仮定する場合は、合併分散を用いた2標本t検定を行い、自由度は $m+n−2$。  
  > 等分散を仮定しない場合は、ウエルチのt検定を使用し、自由度は以下の式で近似される：  
  > $\nu = \frac{ \left( \frac{S_x^2}{n} + \frac{S_y^2}{m} \right)^2 }{ \frac{ \left( \frac{S_x^2}{n} \right)^2 }{n-1} + \frac{ \left( \frac{S_y^2}{m} \right)^2 }{m-1} }$

- ✅ 評価：**しっかり理解できてるにゃ！** 計算式まで丁寧に扱えるようにしたら満点にゃ！

---

### 【問3】  
F検定で自由度(m−1, n−1)とする理由を説明しなさい。また、F検定が片側検定になる理由も述べなさい。

- 🐱 自分の回答：
  > F検定で使用する統計量Fの定義はUx^2/U_y^2となる  
  > Xのデータ数をm, Yのデータ数をnとすると、UxとUyの自由度はそれぞれm-1, n-1となる  
  > このためFの自由度は(m-1, n-1)となる  
  > 片側検定になるのは、ばらつきが大きいかどうかの検定（ばらつきが小さい⇒等分散としてみなせる）のため

- 💡 模範解答：
  > F統計量は2つの不偏分散の比 $F = \frac{U_x^2}{U_y^2}$ であり、それぞれの分散に対して自由度が $m-1$, $n-1$。  
  > よってF分布の自由度は $(m-1, n-1)$。F分布は正の値しか取らず、分散比が大きい方向で検定するため **通常は片側検定**になる。

- ✅ 評価：**構造的理解ができていて◎！** 「非対称性」「分布の形状」など用語でも補足できるとさらに良いにゃ。

---

### 【問4】  
自由度が \( n−1 \) になるのはどのような状況か？理由とあわせて説明しなさい。

- 🐱 自分の回答：
  > 標本平均などを使用した場合は、データ数がn件あった場合自由に決めれるデータ数がn-1（最後の1つは標本平均に集約させるためおのずと一意の値となる）になるので標本平均を利用する場合は自由度がn-1した合計値となる  
  > 母平均を使用する場合はそういった制約がないため、自由度はデータ数のままとなる

- 💡 模範解答：
  > 自由度は「独立に動かせるデータの数」であり、平均を計算した時点で1つの制約が生じる。  
  > よって、n個のデータのうち自由に設定できるのは $n−1$ 個 → 自由度は $n−1$。  
  > 母平均が既知であればこの制約はないため、自由度はnになる。

- ✅ 評価：**非常に明快な理解にゃ！** 「固定する＝制約がある」という言い換えもできるとより明瞭にゃ。
